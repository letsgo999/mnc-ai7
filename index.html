<form id="signup-form" class="space-y-6" onsubmit="submitForm(event)">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <label for="name" class="block text-gray-700 font-medium mb-2">이름</label>
      <input type="text" id="name" name="name" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-900" placeholder="홍길동" required>
    </div>
    <div>
      <label for="email" class="block text-gray-700 font-medium mb-2">이메일</label>
      <input type="email" id="email" name="email" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-900" placeholder="example@email.com" required>
    </div>
  </div>
  <div>
    <label for="phone" class="block text-gray-700 font-medium mb-2">연락처</label>
    <input type="tel" id="phone" name="phone" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-900" placeholder="010-1234-5678" required>
  </div>
  <div>
    <label for="company" class="block text-gray-700 font-medium mb-2">회사/직함</label>
    <input type="text" id="company" name="company" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-900" placeholder="회사명 / 직함">
  </div>
  <div>
    <label for="message" class="block text-gray-700 font-medium mb-2">신청 동기 (선택사항)</label>
    <textarea id="message" name="message" rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:border-blue-900" placeholder="AI 학습에 관심을 갖게 된 계기나 기대하는 점을 자유롭게 작성해 주세요."></textarea>
  </div>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <button type="submit" class="w-full bg-red-600 text-white py-4 !rounded-button font-bold text-lg hover:bg-red-700 transition whitespace-nowrap text-center border-2 border-white">신규멤버 신청</button>
    <a href="https://dimabulsa.kr/product/mnc-ai7-again/" class="w-full bg-blue-900 text-white py-4 !rounded-button font-bold text-lg hover:bg-blue-800 transition whitespace-nowrap text-center border-2 border-white">재수강 신청</a>
  </div>
</form>

<script>
  function submitForm(event) {
    event.preventDefault();

    const form = document.getElementById('signup-form');
    const formData = new FormData(form);
    const data = {
      name: formData.get('name'),
      email: formData.get('email'),
      phone: formData.get('phone'),
      company: formData.get('company'),
      message: formData.get('message')
    };

    // Replace this URL with your Google Apps Script Web App URL after Step 2
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyYcqof_1fP11LF2_Hwc8CwdTmfe2cU89ZO01_T4Tiy6UbYFJW840ynMUv9ZsChlOEzGQ/exec';

    fetch(scriptURL, {
      method: 'POST',
      body: JSON.stringify(data),
      headers: {
        'Content-Type': 'application/json'
      }
    })
    .then(response => response.json())
    .then(result => {
      if (result.status === 'success') {
        const formSuccess = document.createElement('div');
        formSuccess.className = 'bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mt-4';
        formSuccess.innerHTML = '<strong>신청 완료!</strong> 신청이 성공적으로 접수되었습니다. 곧 담당자가 연락드릴 예정입니다.';
        const existingMessages = document.querySelectorAll('.bg-red-100, .bg-green-100');
        existingMessages.forEach(msg => msg.remove());
        document.getElementById('signup-form').appendChild(formSuccess);
        form.reset();
      } else {
        throw new Error('Submission failed');
      }
    })
    .catch(error => {
      const formError = document.createElement('div');
      formError.className = 'bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4';
      formError.innerHTML = '<strong>입력 오류!</strong> 신청 중 오류가 발생했습니다. 다시 시도해 주세요.';
      const existingMessages = document.querySelectorAll('.bg-red-100, .bg-green-100');
      existingMessages.forEach(msg => msg.remove());
      document.getElementById('signup-form').appendChild(formError);
    });
  }
</script>
